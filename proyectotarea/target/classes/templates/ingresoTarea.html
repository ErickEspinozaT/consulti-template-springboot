<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="static/css/ingresoTarea.css" th:href="@{/css/ingresoTarea.css}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>


    <title>Document</title>

</head>

<body>

    <header>
        <div class="menu">
            <nav>
                <ul>
                    <li>
                        <span th:if="${session.usuario !=null}" class="unico">BIENVENIDO/A <span id="usere" class="font-italic" th:text="${session.usuario.nombre}"></span></span>

                    </li>
                    <li>
                        <form th:action="@{/logout}" method="POST">
                            <button type="submit" class="hf">SALIR</button></form>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <CENTER>
        <H1>GESTOR DE TAREA</H1>
    </CENTER>

    <div id="main-container1">

        <a th:href="@{'/new'}"><button type="submit " class="llb ">CREAR</button></a>
        <a th:href="@{'/histo'}"><button type="submit " class="llb ">Historial</button></a>
    </div>




    <div id="main-container ">

        <table>
            <thead>
                <tr>
                    <th>ID TAREA</th>
                    <th>NOMBRE TAREA</th>
                    <th>USUARIO</th>
                    <th>FECHA FIN</th>
                    <th>ESTADO</th>
                    <th>EDITAR</th>
                    <th>ELIMINAR</th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="Tarea:${ListaTarea}">
                    <td th:text="${Tarea.id}">ID </td>
                    <td th:text="${Tarea.nombre}">NOMBRE</td>
                    <td th:text="${Tarea.usuario}">USUARIO</td>
                    <td th:text="${Tarea.Fecha_Fin}">FECHA_FIN</td>
                    <td th:text="${Tarea.estado}" class="clase">ESTADO</td>
                    <td>
                        <a th:href="@{'/edit/' + ${Tarea.id}}" class="edt">Edit</a>
                    </td>
                    <td>
                        <a th:href="@{'/delete/' + ${Tarea.id}}">Delete</a>
                    </td>
                </tr>

            </tbody>>

        </table>
    </div>

</body>

</html>


<script>
    window.onload = function() {
        var fecha = new Date(); //Fecha actual
        var mes = fecha.getMonth() + 1; //obteniendo mes
        var dia = fecha.getDate(); //obteniendo dia
        var ano = fecha.getFullYear(); //obteniendo a√±o
        if (dia < 10)
            dia = '0' + dia; //agrega cero si el menor de 10
        if (mes < 10)
            mes = '0' + mes //agrega cero si el menor de 10
        var date = new String(ano + '-' + mes + '-' + dia);
        document.getElementById('fechaActual').value = date;
        fechaActual.setAttribute('min', date);
    }
</script>
<!-- <script language="javascript">
    var x;

    x = document.getElementById("campoE").textContent;

    if (x == "PROCESO") {
        document.getElementById("campoE").style.backgroundColor = "#66ff33";
    } else {
        if (x == "FINALIZADA") {
            document.getElementById("campoE").style.backgroundColor = "#FF1A1A";
        } else {
            if (x == "PAUSADO") {
                document.getElementById("campoE").style.backgroundColor = "#FFFC1A";
            }
        }
    }
</script> -->

<script>
    $(".clase").each(function() {

        var x = $(this).text()
        var color = $(this)
        if (x == "PROCESO") {
            color.css("backgroundColor", "RGB(156, 245, 134 )");
        } else {
            if (x == "FINALIZADA") {
                color.css("backgroundColor", "rgb(203, 87, 87 )");
            } else {
                if (x == "PAUSADO") {
                    color.css("backgroundColor", "rgb(255, 253, 115 )");
                }
            }
        }

    });
</script>

<script>
    var c;
    c = document.getElementById("usere").textContent;
    document.getElementById("usuref").value = c;
    document.getElementById("est").value = "PROCESO";
</script>